@import url('https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600&display=swap');

:root {
  --wa-bg-app: #d1d7db;
  --wa-bg-sidebar: #ffffff;
  --wa-bg-chat: #efeae2; /* Default WhatsApp Beige */
  --wa-bubble-in: #ffffff;
  --wa-bubble-out: #d9fdd3; /* WhatsApp Green */
  --wa-text-main: #111b21;
  --wa-text-sec: #667781;
}

/* Main Layout */
.whatsapp-layout {
  display: flex;
  height: calc(100vh - 65px);
  background: var(--wa-bg-app);
  font-family: 'Segoe UI', sans-serif;
}

.wa-sidebar {
  width: 350px;
  background: #fff;
  border-right: 1px solid #e9edef;
  display: flex; flex-direction: column;
}

/* Sidebar Styling */
.wa-header { height: 60px; background: #f0f2f5; display: flex; align-items: center; padding: 0 16px; justify-content: space-between; }
.wa-search-bar { background: #fff; padding: 8px 12px; border-bottom: 1px solid #f0f2f5; }
.search-input-wrapper { background: #f0f2f5; border-radius: 8px; display: flex; align-items: center; padding: 6px 12px; }
.search-input-wrapper input { border: none; background: transparent; width: 100%; outline: none; margin-left: 10px; }

.wa-contact-list { flex: 1; overflow-y: auto; }
.wa-contact-row { display: flex; padding: 10px 15px; cursor: pointer; border-bottom: 1px solid #f0f2f5; align-items: center; }
.wa-contact-row:hover { background: #f5f6f6; }
.wa-contact-row.active { background: #f0f2f5; }

.contact-avatar { width: 45px; height: 45px; background: #dfe5e7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #fff; margin-right: 15px; }
.contact-info .contact-name { font-size: 1rem; color: #111; }
.contact-info .contact-last-msg { font-size: 0.8rem; color: #666; }

/* === CHAT AREA === */
.wa-chat-area {
  flex: 1;
  display: flex; flex-direction: column;
  background-color: var(--wa-bg-chat);
  /* Optional: WhatsApp Background Pattern */
  background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');
  position: relative;
}

.wa-chat-header {
  height: 60px; background: #f0f2f5; padding: 0 16px;
  display: flex; align-items: center; gap: 15px;
  border-left: 1px solid #d1d7db;
}
.profile-pic { width: 40px; height: 40px; background: #dfe5e7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
.profile-text h3 { margin: 0; font-size: 1rem; font-weight: 500; }
.profile-text span { font-size: 0.75rem; color: #666; }

/* === MESSAGES CONTAINER (CRITICAL FIX) === */
.wa-messages-container {
  flex: 1;
  overflow-y: auto;
  padding: 20px 5%; /* Side padding for better view */
  display: flex;
  flex-direction: column;
  gap: 4px; /* Tight gap like WhatsApp */
}

/* Row Wrapper */
.message-row {
  display: flex;
  width: 100%;
  margin-bottom: 2px;
}

/* ALIGNMENT CLASSES */
.row-left {
  justify-content: flex-start; /* User -> Left */
}

.row-right {
  justify-content: flex-end; /* AI -> Right */
}

/* BUBBLE STYLES */
.wa-bubble {
  max-width: 65%;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 0.9rem;
  line-height: 19px;
  position: relative;
  box-shadow: 0 1px 0.5px rgba(11,20,26,0.13);
  display: flex;
  flex-direction: column;
}

/* COLORS */
.bubble-white {
  background-color: #ffffff; /* White for User */
  border-top-left-radius: 0; /* Tail left */
}

.bubble-green {
  background-color: #d9fdd3; /* Green for AI */
  border-top-right-radius: 0; /* Tail right */
}

/* Names inside bubble */
.sender-name-tiny {
  font-size: 0.75rem;
  font-weight: 700;
  margin-bottom: 2px;
}
.user-label { color: #d85c2c; } /* Orange name for user */
.system { color: #00a884; }     /* Green name for AI */

.bubble-text {
  color: #111b21;
  word-wrap: break-word;
  padding-right: 50px; /* Space for time */
}

.bubble-meta {
  position: absolute;
  bottom: 4px;
  right: 7px;
  display: flex;
  align-items: center;
  gap: 3px;
}
.timestamp { font-size: 0.65rem; color: #667781; }
.read { color: #53bdeb; } /* Blue ticks */

/* Input Bar */
.wa-input-bar {
  padding: 10px 16px; background: #f0f2f5;
  display: flex; align-items: center;
}
.wa-input-bar input {
  width: 100%; padding: 10px; border-radius: 8px; border: none; outline: none;
}

/* Mobile */
.back-arrow { display: none; background: none; border: none; cursor: pointer; }
.hidden-mobile { display: none !important; }

@media (max-width: 768px) {
  .wa-sidebar { width: 100%; }
  .wa-chat-area { width: 100%; }
  .back-arrow { display: block; margin-right: 10px; }
  .wa-messages-container { padding: 10px 10px; }
  .wa-bubble { max-width: 85%; }
}